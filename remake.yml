sources:
  - R/

packages:
  - readxl
  - readr
  - dplyr
  - ggplot2
  - RSQLite
  - taxizesoap
  - storr
  - bold

targets:
  all:
    depends:
      - irl_species_in_bold

  irl_checklist:
    command: read_irl_checklist(file="data-raw/Species List Database Post V1.xlsx")

  data/bold_database.sqlite:
    command: create_bold_db(path=I("data-raw/BOLD"))

  joined_data:
    command: create_joined_data(irl_checklist, "data/bold_database.sqlite")

  species_list:
    command: join_species("data/bold_database.sqlite")
    depends: joined_data

  fill_synonym_store:
    command: get_synonym_store(irl_checklist)

  fill_classification_store:
    command: get_classification_store(irl_checklist)

  synonym_table:
    command: make_synonym_table(store_path=I("data/synonym_storr"), database_path=I("data/bold_database.sqlite"))
    depends: fill_synonym_store

  synonym_list:
    command: join_synonyms("data/bold_database.sqlite")
    depends: synonym_table

  fill_bold_specimen_store:
    command: get_bold_specimens_store(irl_checklist)

  irl_species_in_bold:
    command: get_irl_species_in_bold()
    depends:
      - fill_synonym_store
      - fill_classification_store
      - fill_bold_specimen_store
